 CREATE TABLE ACM_EXCEPTION_REQUEST(
  ID  BIGINT NOT NULL IDENTITY(1,1) PRIMARY KEY,
 MAKER_NAME varchar(256),
 MAKER_USERNAME varchar(256),
 CUSTOMER_ID bigint,
 CUSTOMER_NAME varchar(256),
  PRODUCT_NAME varchar(256),
 PRODUCT_ID bigint,
 PRODUCT_LIMIT DECIMAL(16,4),
  ALLOWED_AMOUNT DECIMAL(16,4),
 REQUESTED_AMOUNT DECIMAL(16,4),
 STATUT int,
 GROUP_OWNER_CODE varchar(256),
 OWNER_NAME varchar(256),
 OWNER_USERNAME varchar(256),
 NOTE varchar(256),
 ACM_ENABLED BIT NOT NULL,
 DATE_INSERTION DATETIME NULL,
 INSERT_BY  VARCHAR (256) NULL,
 DATE_LAST_UPDATE DATETIME NULL,
 UPDATED_BY  VARCHAR (256) NULL,
 ACM_VERSION INT NULL
);

INSERT INTO [ACM_ENVIRONNEMENT]([ACM_ENVIRONNEMENT_KEY], [ACM_ENVIRONNEMENT_VALUE], [ACM_ENABLED], [DATE_INSERTION], [ACM_VERSION],description,CATEGORY) 
VALUES ('APPROVE_EXCEPTIONS', 'ACM_SUPER_ADMIN_GROUPE', 1, GETDATE(), 0,'approve exception group code', 'FUNCTIONAL');

INSERT INTO [dbo].[ACM_HABILITATION]([ACTIONS],[CLIENT],[GROUPE_ID],[ACM_HABILITATION],[ACM_WEB_ROUTE],[VALUE],[ACM_ENABLED],[DATE_INSERTION],[INSERT_BY],[ACM_VERSION])  select 'EXECUTE','ACM' ,ID_ACM_GROUPE , 'IHM_EXCEPTION_REQUESTS','exception-request' ,'IHM' ,1,GETDATE(),'ADMIN',0   from ACM_GROUPE    

INSERT INTO [dbo].[ACM_HABILITATION]([ACTIONS],[CLIENT],[GROUPE_ID],[ACM_HABILITATION],[ACM_WEB_ROUTE],[VALUE],[ACM_ENABLED],[DATE_INSERTION],[INSERT_BY],[ACM_VERSION])   select 'EXECUTE','ACM' ,ID_ACM_GROUPE ,'IHM_EXCEPTION_REQUESTS','exception-request' ,'APPROVE' ,1,GETDATE(),'ADMIN',0 from ACM_GROUPE

INSERT INTO [dbo].[ACM_HABILITATION]([ACTIONS],[CLIENT],[GROUPE_ID],[ACM_HABILITATION],[ACM_WEB_ROUTE],[VALUE],[ACM_ENABLED],[DATE_INSERTION],[INSERT_BY],[ACM_VERSION])  select 'EXECUTE','ACM' ,ID_ACM_GROUPE ,'IHM_EXCEPTION_REQUESTS','exception-request' ,'REJECT' ,1,GETDATE(),'ADMIN',0 from ACM_GROUPE

INSERT INTO [dbo].[ACM_HABILITATION_IHM_ROUTE]([CLIENT],[CODE_IHM_ROUTE],[IHM_ROUTE],[DESCRIPTION],[ACM_ENABLED],[DATE_INSERTION],[INSERT_BY],[ACM_VERSION])
		VALUES('ACM','IHM_EXCEPTION_REQUESTS','','page exception requests' ,1,GETDATE(),'ADMIN',0);

		
		 INSERT INTO [dbo].[ACM_HABILITATION_IHM_BUTTON]([CLIENT],[CODE_IHM_BUTTON],[IHM_BUTTON],[DESCRIPTION],[ID_ACM_HABILITATION_IHM_ROUTE],[ACM_ENABLED],[DATE_INSERTION],[INSERT_BY],[ACM_VERSION])
select 'ACM','ACCEPT_EXCEPTION_REQUEST','IHM_EXCEPTION_REQUESTS','APPROVE',ID_ACM_HABILITATION_IHM_ROUTE,1,GETDATE(),'ADMIN',0  from ACM_HABILITATION_IHM_ROUTE where CODE_IHM_ROUTE = 'IHM_EXCEPTION_REQUESTS';

  INSERT INTO [dbo].[ACM_HABILITATION_IHM_BUTTON]([CLIENT],[CODE_IHM_BUTTON],[IHM_BUTTON],[DESCRIPTION],[ID_ACM_HABILITATION_IHM_ROUTE],[ACM_ENABLED],[DATE_INSERTION],[INSERT_BY],[ACM_VERSION])
select 'ACM','REJECT_EXCEPTION_REQUEST','IHM_EXCEPTION_REQUESTS','REJECT',ID_ACM_HABILITATION_IHM_ROUTE,1,GETDATE(),'ADMIN',0  from ACM_HABILITATION_IHM_ROUTE where CODE_IHM_ROUTE = 'IHM_EXCEPTION_REQUESTS';
